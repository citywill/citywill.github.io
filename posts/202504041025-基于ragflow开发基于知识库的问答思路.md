---
excerpt: null
image: null
title: 基于ragflow开发基于知识库的问答思路
datetime: '2025-04-04 13:12'
permalink: /posts/202504041025
category: 永久笔记
tags:
  - ragflow
  - 知识库
  - AI
prev:
  text: 基于大模型的知识库问答系统建设方案
  link: /posts/202504180933
next:
  text: AI辅助提升专业开发效率的8个核心技巧
  link: /posts/202503171047
---

# 基于ragflow开发基于知识库的问答思路


## 问题

- 在ragflow中，复杂的问答需要进行agent编排，但也未必有良好效果
- 比如，一个excel，基于事项、情形、材料，用户要根据事项提问，智能体根据情形进行多轮问答，返回材料。
- 基于ragflow的QA、Table的chunck方法都不理想，要基于复杂编排。

## 解决方案

- 通过ragflow的api创建切片，在切片前，对数据进行如下处理：
	- 通过大模型针对事项提出问题（questions）
	- 把情形和材料处理成json，作为chunck的content
- ragflow会对questions优先想量化
- 用户提问后，召回chunck，会返回情形和材料的json，如果有多个情形，则通过大模型进行追问
- 用户回答后，大模型判断用户提出的情形，并据此给予综合回答。

## 流程

```mermaid
graph TB

subgraph ragflow
	创建切片
	召回切片
end

subgraph 知识治理
	excel上传 --> 处理切片 --> 创建切片
	subgraph 处理切片
		通过大模型提出问题
		对情形和材料组成json
	end
end

subgraph 问答
	用户提问 --> 召回切片 --> 是否存在多种情形
	是否存在多种情形 --> |不存在|回答用户
	是否存在多种情形 --> |存在|追问是何种情形 --> 用户补充问题 --> 回答用户
	
end
```

